# hip-build-deps
HIP dependencies sufficient to build IREE's runtime. This is an implementation detail intended to make IREE's build more maintainable. Users should look at the full SDK repository: https://github.com/ROCm-Developer-Tools/HIP

## Updating

We use a tiny fraction of the HIP headers, but the upstream repositories are intertwined.
The include diretory here is collapsed from:

* https://github.com/ROCm-Developer-Tools/HIP.git : include/hip/*
* https://github.com/ROCm-Developer-Tools/clr.git : hipamd/include/hip/amd_detail/*

Current versions:

* HIP: 9cb358b157c45c05d4a1c98ef3d1cb5b840d9385
* clr: 5914ac3c6e9b3848023a7fa25e19e560b1c38541

## Local Patches

* `include/hip/hip_version.h` : This file must usually be generated by an opaque process.
   It is manually created here by adapting values in `HIP/VERSION`
* `include/hip/amd_detail/amd_hip_vector_types.h` : Does not compile on Windows due to
  illegal use of `__m64` type punning. Actual uses seem to not be required by other
  header code, so just comment out the last eight definitions in the file. Not doing this
  will yield errors at these lines so it is hard to miss.
